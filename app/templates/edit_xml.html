{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Corpora - Edit XML</title>
    <style>
        #cwrcWriterContainer {
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="cwrcWriterContainer"></div>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="{% static 'CWRCWriter/js/cwrcwriter.js' %}"></script>
    <script type="text/javascript">
        var writer = null;
        $(document).ready(function() {
            writer = new CWRCWriter({
                container: "cwrcWriterContainer",
                storageDialogs: {},
                entityLookupDialogs: {},
                cwrcRootUrl: "/static/CWRCWriter/",
                schemas: {
                    "tei": {
                        "name": "CWRC Basic TEI Schema",
                        "url": "https://cwrc.ca/schemas/cwrc_tei_lite.rng",
                        "cssUrl": "https://cwrc.ca/templates/css/tei.css",
                        "schemaMappingsId": "tei",
                        "entityTemplates": {
                            "note": "https://dev-cwrc-writer.cwrc.ca/schema/tei/xml/note.xml",
                            "citation": "https://dev-cwrc-writer.cwrc.ca/schema/tei/xml/citation.xml"
                        }
                    },
                    "events": {
                        "name": "Events Schema",
                        "url": "https://cwrc.ca/schemas/orlando_event_v2.rng",
                        "cssUrl": "https://cwrc.ca/templates/css/orlando_v2_cwrc-writer.css",
                        "schemaMappingsId": "orlando",
                        "entityTemplates": {
                            "note": "https://dev-cwrc-writer.cwrc.ca/schema/orlando/xml/note_events.xml",
                            "citation": "https://dev-cwrc-writer.cwrc.ca/schema/orlando/xml/citation_events.xml"
                        }
                    },
                    "biography": {
                        "name": "Biography Schema",
                        "url": "https://cwrc.ca/schemas/orlando_biography_v2.rng",
                        "cssUrl": "https://cwrc.ca/templates/css/orlando_v2_cwrc-writer.css",
                        "schemaMappingsId": "orlando",
                        "entityTemplates": {
                            "note": "https://dev-cwrc-writer.cwrc.ca/schema/orlando/xml/note_biography.xml",
                            "citation": "https://dev-cwrc-writer.cwrc.ca/schema/orlando/xml/citation_biography.xml"
                        }
                    },
                    "writing": {
                        "name": "Writing Schema",
                        "url": "https://cwrc.ca/schemas/orlando_writing_v2.rng",
                        "cssUrl": "https://cwrc.ca/templates/css/orlando_v2_cwrc-writer.css",
                        "schemaMappingsId": "orlando",
                        "entityTemplates": {
                            "note": "https://dev-cwrc-writer.cwrc.ca/schema/orlando/xml/note_writing.xml",
                            "citation": "https://dev-cwrc-writer.cwrc.ca/schema/orlando/xml/citation_writing.xml"
                        }
                    },
                    "cwrcEntry": {
                        "name": "CWRC Entry Schema",
                        "url": "https://cwrc.ca/schemas/cwrc_entry.rng",
                        "cssUrl": "https://cwrc.ca/templates/css/cwrc.css",
                        "schemaMappingsId": "cwrcEntry",
                        "entityTemplates": {
                            "note": "https://dev-cwrc-writer.cwrc.ca/schema/cwrcEntry/xml/note.xml",
                            "citation": "https://dev-cwrc-writer.cwrc.ca/schema/cwrcEntry/xml/citation.xml"
                        }
                    }
                }
            });

            writer.event('writerInitialized').subscribe(function() {
                $.get("{{ xml_file }}", function(xml_string){
                    writer.setDocument(xml_string);
                });
            });
        });
    </script>
</body>
</html>